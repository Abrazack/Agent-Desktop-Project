<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        /* Previous CSS remains, add these new styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
        }
        
        .form-group input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .active {
            background-color: #004a9f !important;
        }
    </style>
</head>
<body>
    <!-- Add modal structure -->
    <div id="formModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <form id="dataForm">
                <div id="formFields"></div>
                <button type="submit" class="action-button success">Save</button>
                <button type="button" class="action-button delete" onclick="closeModal()">Cancel</button>
            </form>
        </div>
    </div>

    <header class="header">
        <h1>Admin Dashboard</h1>
    </header>

    <nav class="nav-menu">
        <!-- Navigation buttons remain same -->
    </nav>

    <main class="container">
        <!-- Updated Employees Section -->
        <section id="employees" class="section hidden">
            <div class="section-header">
                <h2>Manage Employees</h2>
                <div>
                    <button class="action-button success" data-action="addEmployee">Add Employee</button>
                    <button class="action-button" data-action="managePayroll">Manage Payroll</button>
                    <button class="action-button" data-action="trackAttendance">Track Attendance</button>
                </div>
            </div>
            <table>
                <!-- Table content updated with sample data -->
            </table>
        </section>

        <!-- Other sections updated similarly with data-action attributes -->
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Section navigation
            document.querySelectorAll('.nav-button').forEach(button => {
                button.addEventListener('click', () => {
                    const sectionId = button.dataset.section;
                    showSection(sectionId);
                });
            });

            // Handle all action buttons
            document.body.addEventListener('click', (e) => {
                if (e.target.matches('[data-action]')) {
                    const action = e.target.dataset.action;
                    handleAction(action);
                }
                
                // Handle edit/delete buttons
                if (e.target.classList.contains('edit')) {
                    handleEdit(e.target.closest('tr'));
                }
                if (e.target.classList.contains('delete')) {
                    handleDelete(e.target.closest('tr'));
                }
            });

            // Form submission
            document.getElementById('dataForm').addEventListener('submit', handleFormSubmit);

            // Initialize with employees section
            showSection('employees');
            initializeSampleData();
        });

        // Core Functions
        function handleAction(action) {
            const actions = {
                addEmployee: () => showFormModal('employee'),
                managePayroll: () => alert('Payroll management system loading...'),
                trackAttendance: () => alert('Attendance tracking system loading...'),
                addProduct: () => showFormModal('product'),
                importInventory: () => alert('Import CSV/Excel feature loading...'),
                addSale: () => showFormModal('sale'),
                processRefund: () => alert('Refund processing system loading...'),
                generateInvoice: () => alert('Invoice generation in progress...'),
                addCustomer: () => showFormModal('customer'),
                sendPromoEmail: () => alert('Promotional emails being sent...'),
                generateReport: () => alert('Generating financial report...'),
                exportReport: () => alert('Exporting report...'),
                setAccessLevels: () => showFormModal('access'),
                enable2FA: () => confirm('Enable two-factor authentication for all users?'),
                clearLogs: () => document.getElementById('log-list').innerHTML = ''
            };

            if (actions[action]) actions[action]();
        }

        function showFormModal(type) {
            const config = {
                employee: {
                    title: 'Add New Employee',
                    fields: ['Name', 'Email', 'Role', 'Schedule']
                },
                product: {
                    title: 'Add New Product',
                    fields: ['Product Name', 'SKU', 'Price', 'Stock', 'Expiry Date']
                },
                sale: {
                    title: 'Record New Sale',
                    fields: ['Product ID', 'Quantity', 'Customer Email', 'Discount']
                },
                customer: {
                    title: 'Add New Customer',
                    fields: ['Name', 'Email', 'Phone', 'Address']
                },
                access: {
                    title: 'Set Access Levels',
                    fields: ['Employee ID', 'Access Level']
                }
            };

            const { title, fields } = config[type];
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('formFields').innerHTML = fields.map(field => `
                <div class="form-group">
                    <label>${field}</label>
                    <input type="${field === 'Expiry Date' ? 'date' : 'text'}" required>
                </div>
            `).join('');

            document.getElementById('formModal').style.display = 'flex';
        }

        function handleFormSubmit(e) {
            e.preventDefault();
            const inputs = Array.from(document.querySelectorAll('#formFields input'));
            const formData = inputs.reduce((acc, input) => {
                acc[input.previousElementSibling.textContent] = input.value;
                return acc;
            }, {});

            console.log('Form Submitted:', formData);
            alert('Data saved successfully!');
            closeModal();
        }

        function handleEdit(row) {
            const cells = Array.from(row.cells).slice(0, -1);
            const data = cells.map(cell => cell.textContent);
            alert(`Editing: ${data.join(' - ')}`);
        }

        function handleDelete(row) {
            if (confirm('Are you sure you want to delete this record?')) {
                row.remove();
                alert('Record deleted successfully!');
            }
        }

        function closeModal() {
            document.getElementById('formModal').style.display = 'none';
            document.getElementById('dataForm').reset();
        }

        function initializeSampleData() {
            // Initialize sample employee data
            const employeeList = document.getElementById('employee-list');
            employeeList.innerHTML = `
                <tr>
                    <td>John Doe</td>
                    <td>Manager</td>
                    <td>Mon-Fri 9-5</td>
                    <td>
                        <button class="action-button edit">Edit</button>
                        <button class="action-button delete">Delete</button>
                    </td>
                </tr>
            `;

            // Initialize other sample data similarly...
        }

        // Previous section management functions remain
    </script>
</body>
</html>